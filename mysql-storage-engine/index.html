<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> mysql storage engine · Catalin T.</title><meta name="description" content="read the following only if you have mysql 5.6 + , if not , ignore this until you do
Benefits of InnoDB TablesIf you use MyISAM tables but aren’t tied to them for technical reasons, you’ll find many things more convenient when you use InnoDB tables in MySQL 5.5:
yeah , i said 5.6 not 5.5!

·         If your server crashes because of a hardware or software issue, regardless of what was happening in the database at the time, you don’t need to do anything special after restarting the database. InnoDB automatically fin"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><header><a href="/" class="logo-link"><img src="/img/package.svg"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">博客</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li><li class="nav-list-item"><a href="https://github.com/xxxxx" target="_blank" class="nav-list-link">GITHUB</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h2 class="post-title"><a href="/mysql-storage-engine/" class="post-title-link">mysql storage engine</a></h2><div class="post-meta"><div class="post-time">Jul 17, 2013</div></div><div class="post-content"><p>read the following only if you have mysql 5.6 + , if not , ignore this until you do</p>
<h4 id="Benefits_of_InnoDB_Tables">Benefits of InnoDB Tables</h4><p>If you use MyISAM tables but aren’t tied to them for technical reasons, you’ll find many things more convenient when you use InnoDB tables in MySQL 5.5:</p>
<p>yeah , i said 5.6 not 5.5!</p>
<a id="more"></a>
<p>·         If your server crashes because of a hardware or software issue, regardless of what was happening in the database at the time, you don’t need to do anything special after restarting the database. InnoDB automatically finalizes any changes that were committed before the time of the crash, and undoes any changes that were in process but not committed. Just restart and continue where you left off.</p>
<p>·         The InnoDB buffer pool caches table and index data as the data is accessed. Frequently used data is processed directly from memory. This cache applies to so many types of information, and speeds up processing so much, that dedicated database servers assign up to 80% of their physical memory to the InnoDB buffer pool.</p>
<p>·         If you split up related data into different tables, you can set up foreign keys that enforce referential integrity. Update or delete data, and the related data in other tables is updated or deleted automatically. Try to insert data into a secondary table without corresponding data in the primary table, and it gets kicked out automatically.</p>
<p>·         If data becomes corrupted on disk or in memory, a checksum mechanism alerts you to the bogus data before you use it.</p>
<p>·         When you design your database with appropriate primary key columns for each table, operations involving those columns are automatically optimized. It is very fast to reference the primary key columns in <code>**WHERE**</code> clauses, <code>**ORDER BY**</code> clauses, <code>**GROUP BY**</code> clauses, and join operations.</p>
<p>·         Inserts, updates, deletes are optimized by an automatic mechanism called change buffering. InnoDB not only allows concurrent read and write access to the same table, it caches changed data to streamline disk I/O.</p>
<p>·         Performance benefits are not limited to giant tables with long-running queries. When the same rows are accessed over and over from a table, a feature called the Adaptive Hash Index takes over to make these lookups even faster, as if they came out of a hash table.</p>
<h4 id="Best_Practices_for_InnoDB_Tables"><a name="13fecf51c0a91843_idp74470096"></a>Best Practices for InnoDB Tables</h4><p>If you have been using InnoDB for a long time, you already know about features like transactions and foreign keys. If not, read about them throughout this chapter. To make a long story short:</p>
<p>·         Specify a primary key for every table using the most frequently queried column or columns, or an auto-increment value if there isn’t an obvious primary key.</p>
<p>·         Embrace the idea of joins, where data is pulled from multiple tables based on identical ID values from those tables. For fast join performance, define foreign keys on the join columns, and declare those columns with the same datatype in each table. The foreign keys also propagate deletes or updates to all affected tables, and prevent insertion of data in a child table if the corresponding IDs are not present in the parent table.</p>
<p>·         Turn off autocommit. Committing hundreds of times a second puts a cap on performance (limited by the write speed of your storage device).</p>
<p>·         Bracket sets of related changes, logical units of work, with <code>**START TRANSACTION**</code> and <code>**COMMIT**</code> stateme<wbr>nts. While you don’t want to commit too often, you also don’t want to issue huge batches of <code>**INSERT**</code>, <code>**UPDATE**</code>, or <code>**DELETE**</code>statements that run for hours without committing.</p>
<p>·         Stop using <code>**LOCK TABLE**</code> statements. InnoDB can handle multiple sessions all reading and writing to the same table at once, without sacrificing reliability or high performance. To get exclusive write access to a set of rows, use the<code>**SELECT ... FOR UPDATE**</code> syntax to lock just the rows you intend to update.</p>
<p>·         Enable the <code>**innodb_file_per_table**</code> opti<wbr>on to put the data and indexes for individual tables into separate files, instead of in a single giant system tablespace. (This setting is required to use some of the other features, such as table compression and fast truncation.)</p>
<p>·         Evaluate whether your data and access patterns benefit from the new InnoDB table compression feature (<code>**ROW_FORMAT=COMPRESSED**</code> on the <code>**CREATE TABLE**</code> statement. You can compress InnoDB tables without sacrificing read/write capability.</p>
<p>·         Run your server with the option <code>**--sql_mode=NO_ENGINE_&lt;wbr /&gt;SUBSTITUTION**</code> to prevent tables being created with a different storage engine if there is an issue with the one specified in the <code>**ENGINE=**</code> clause of <code>**CREATE TABLE**</code>.</p>
<h4 id="Recent_Improvements_for_InnoDB_Tables_(from_the_Plugin_Era)"><a name="13fecf51c0a91843_idp74489456"></a>Recent Improvements for InnoDB Tables (from the Plugin Era)</h4><p>If you have experience with InnoDB, but not the recent incarnation known as the InnoDB Plugin, read about the latest enhancements in <a href="http://dev.mysql.com/doc/refman/5.5/en/innodb-5-5.html" title="14.4. New Features of InnoDB 1.1" target="_blank" rel="external">Section 14.4, “New Features of InnoDB 1.1”</a>. To make a long story short:</p>
<p>·         You can compress tables and associated indexes.</p>
<p>·         You can create and drop indexes with much less performance or availability impact than before.</p>
<p>·         Truncating a table is very fast, and can free up disk space for the operating system to reuse, rather than freeing up space within the system tablespace that only InnoDB could reuse.</p>
<p>·         The storage layout for table data is more efficient for BLOBs and long text fields.</p>
<p>·         You can monitor the internal workings of the storage engine by querying <code>**INFORMATION_SCHEMA**</code> ta<wbr>bles.</p>
<p>·         You can monitor the performance details of the storage engine by querying <code>**performance_schema**</code> ta<wbr>bles.</p>
<p>·         There are many many performance improvements. In particular, crash recovery, the automatic process that makes all data consistent when the database is restarted, is fast and reliable. (Now much much faster than long-time InnoDB users are used to.) The bigger the database, the more dramatic the speedup.</p>
<p>Most new performance features are automatic, or at most require setting a value for a configuration option. For details, see <a href="http://dev.mysql.com/doc/refman/5.5/en/innodb-performance.html" title="14.4.7. InnoDB Performance and Scalability Enhancements" target="_blank" rel="external">Section 14.4.7, “<code>**InnoDB**</code> Performance and Scalability Enhancements”</a>. For InnoDB-specific tuning techniques you can apply in your application code, see <a href="http://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb.html" title="8.5. Optimizing for InnoDB Tables" target="_blank" rel="external">Section 8.5, “Optimizing for <code>**InnoDB**</code> Tables”</a>. Advanced users can review <a href="http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html" title="14.3.4. InnoDB Startup Options and System Variables" target="_blank" rel="external">Section 14.3.4, “<code>**InnoDB**</code> Startup Options and System Variables”</a>.</p>
</div></article></div></section><footer><div class="paginator"><a href="/pop-quiz/" class="prev">上一篇</a><a href="/mysql-datetime-vs-timestamp-column-type/" class="next">下一篇</a></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-XXXXXXX-X",'auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];(function() {var hm = document.createElement("script");hm.src = "//hm.baidu.com/hm.js?xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx";var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s);})();</script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></body></html>